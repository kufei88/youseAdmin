(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["af09"],{af09:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{padding:"20px",background:"#fff",margin:"10px"}},[r("Row",[r("Col",{attrs:{span:"6"}},[r("Card",{staticStyle:{width:"350px","margin-bottom":"10px"}},[r("p",{attrs:{slot:"title"},slot:"title"},[r("Icon",{attrs:{type:"ios-film-outline"}}),t._v("基础系数\n              ")],1),r("a",{attrs:{slot:"extra",href:"#"},on:{click:function(e){return e.preventDefault(),t.saveFactor(e)}},slot:"extra"},[r("Icon",{attrs:{type:"ios-loop-strong"}}),t._v("保存\n              ")],1),r("Row",[r("Col",{attrs:{span:"8"}},[t._v("业务员")]),r("Col",{attrs:{span:"8"}},[t._v("系数")]),r("Col",{attrs:{span:"8"}},[t._v("目标业绩(万元)")])],1),t._l(t.factorList,function(e){return r("Row",{key:e.managerCode,staticStyle:{"margin-top":"5px"}},[r("Col",{attrs:{span:"8"}},[t._v(t._s(e.name))]),r("Col",{attrs:{span:"8"}},[r("InputNumber",{model:{value:e.factor,callback:function(r){t.$set(e,"factor",r)},expression:"item.factor"}})],1),r("Col",{attrs:{span:"8"}},[r("InputNumber",{model:{value:e.target,callback:function(r){t.$set(e,"target",r)},expression:"item.target"}})],1)],1)})],2)],1),r("Col",{attrs:{span:"18"}},[r("Card",{staticStyle:{width:"550px","margin-bottom":"10px"}},[r("p",{attrs:{slot:"title"},slot:"title"},[r("Icon",{attrs:{type:"ios-film-outline"}}),t._v("增长系数分档\n          ")],1),r("h4",[t._v("公司系数分档设置")]),r("Button",{staticStyle:{margin:"10px 0"},attrs:{type:"primary",icon:"md-add"},on:{click:t.addCompanyFactor}},[t._v("新增")]),r("Table",{attrs:{columns:t.columns1,data:t.companyFactorList}}),r("h4",{staticStyle:{"margin-top":"20px"}},[t._v("小组系数分档设置")]),r("Button",{staticStyle:{margin:"10px 0"},attrs:{type:"primary",icon:"md-add"},on:{click:t.addGroupFactor}},[t._v("新增")]),r("Table",{attrs:{columns:t.columns1,data:t.groupFactorList}})],1)],1)],1),r("Modal",{attrs:{title:t.state,footerHide:!0,width:"400"},model:{value:t.showImg,callback:function(e){t.showImg=e},expression:"showImg"}},[r("Form",{ref:"formItem",attrs:{rules:t.ruleValidate,model:t.formItem,"label-width":120}},[r("FormItem",{attrs:{label:t.performanceLabel,prop:"performance"}},[r("InputNumber",{model:{value:t.formItem.performance,callback:function(e){t.$set(t.formItem,"performance",e)},expression:"formItem.performance"}})],1),r("FormItem",{attrs:{label:"系数",prop:"factor"}},[r("InputNumber",{attrs:{placeholder:""},model:{value:t.formItem.factor,callback:function(e){t.$set(t.formItem,"factor",e)},expression:"formItem.factor"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(e){t.ok("formItem")}}},[t._v("确定")]),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"dashed"},on:{click:function(e){t.showImg=!1}}},[t._v("取消")])],1)],1)],1)],1)},a=[],n=(r("7f7f"),r("66df")),s={data:function(){var t=this;return{state:"",showImg:!1,type:0,oldId:0,oldPerfor:"",performanceLabel:"",formItem:{performance:"",factor:""},ruleValidate:{performance:[{required:!0,message:"公司业绩不能为空",trigger:"blur",type:"number"}],factor:[{required:!0,message:"系数不能为空",type:"number",trigger:"blur"}]},factorList:[],columns1:[{title:"业绩",key:"performance"},{title:"系数",key:"factor"},{title:"操作",width:150,render:function(e,r){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modify(r)}}},"修改"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(r)}}},"删除")])}}],companyFactorList:[],groupFactorList:[]}},mounted:function(){this.getFactorList()},methods:{ok:function(t){var e=this;this.$refs[t].validate(function(t){var r=e;if(!t)return e.showImg=!0,!1;var o=e.formItem;o.oldId=e.oldId,o.type=e.type,o.oldPerfor=e.oldPerfor;e.state;n["a"].request({url:"manager/addPerformanceFactor",params:o,method:"post"}).then(function(t){t.data.returnCode>0?(r.$Message.info("保存成功"),r.showImg=!1,r.getFactorList()):0==t.data.returnCode&&r.$Message.info("该分档已存在")})})},addCompanyFactor:function(){this.showImg=!0,this.state="新增公司系数分档设置",this.type=0,this.oldId=0,this.formItem.performance="",this.formItem.factor="",this.performanceLabel="公司业绩(万元)"},addGroupFactor:function(){this.showImg=!0,this.state="新增小组系数分档设置",this.type=1,this.oldId=0,this.formItem.performance="",this.formItem.factor="",this.performanceLabel="小组业绩(万元)"},modify:function(t){console.log(t.row.id),this.oldId=t.row.id,this.showImg=!0,this.state="修改公司系数分档设置",this.formItem.performance=t.row.performance,this.formItem.factor=t.row.factor,this.oldPerfor=t.row.performance},remove:function(t){var e=this;n["a"].request({url:"manager/delPerformanceFactor",params:{oldId:t.row.id},method:"get"}).then(function(t){t.data.returnCode>0?(e.$Message.info("删除成功"),e.getFactorList()):e.$Message.info("删除失败")})},getFactorList:function(){var t=this;n["a"].request({url:"manager/getManagerFactorList",params:{},method:"get"}).then(function(e){t.factorList=e.data}),n["a"].request({url:"manager/getPerformanceFactorList",params:{type:0},method:"get"}).then(function(e){t.companyFactorList=e.data}),n["a"].request({url:"manager/getPerformanceFactorList",params:{type:1},method:"get"}).then(function(e){t.groupFactorList=e.data})},saveFactor:function(){var t={factorList:encodeURI(JSON.stringify(this.factorList))};n["a"].request({url:"manager/saveFactorList",params:t,method:"get"}).then(function(t){console.log(t)})}}},i=s,c=r("2877"),m=Object(c["a"])(i,o,a,!1,null,null,null);m.options.__file="setting.vue";e["default"]=m.exports}}]);