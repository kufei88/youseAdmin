(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["af09"],{af09:function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{padding:"20px",background:"#fff",margin:"10px"}},[o("Row",[o("Button",{attrs:{type:t.buttonType},on:{click:t.closeAccountClick}},[t._v(t._s(t.closeAccount))])],1),o("Row",{staticStyle:{"margin-top":"10px"}},[o("div",{staticStyle:{float:"left"}},[o("Card",{staticStyle:{width:"350px","margin-bottom":"10px"}},[o("p",{attrs:{slot:"title"},slot:"title"},[o("Icon",{attrs:{type:"ios-film-outline"}}),t._v("基础系数\n              ")],1),o("a",{attrs:{slot:"extra",href:"#"},on:{click:function(e){return e.preventDefault(),t.saveFactor(e)}},slot:"extra"},[o("Icon",{attrs:{type:"ios-loop-strong"}}),t._v("保存\n              ")],1),o("Row",[o("Col",{attrs:{span:"8"}},[t._v("业务员")]),o("Col",{attrs:{span:"8"}},[t._v("系数")]),o("Col",{attrs:{span:"8"}},[t._v("目标业绩(万元)")])],1),t._l(t.factorList,function(e){return o("Card",{key:e.dept,staticStyle:{"margin-top":"5px"},attrs:{bordered:!1}},[o("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.dept))]),t._l(e.list,function(e){return o("Row",{key:e.managerCode,staticStyle:{"margin-top":"5px"}},[o("Col",{attrs:{span:"8"}},[t._v(t._s(e.name))]),o("Col",{attrs:{span:"8"}},[o("InputNumber",{model:{value:e.factor,callback:function(o){t.$set(e,"factor",o)},expression:"item1.factor"}})],1),o("Col",{attrs:{span:"8"}},[o("InputNumber",{model:{value:e.target,callback:function(o){t.$set(e,"target",o)},expression:"item1.target"}})],1)],1)})],2)})],2)],1),o("div",{staticStyle:{float:"left","margin-left":"20px"}},[o("Card",{staticStyle:{width:"550px","margin-bottom":"10px"}},[o("p",{attrs:{slot:"title"},slot:"title"},[o("Icon",{attrs:{type:"ios-film-outline"}}),t._v("增长系数分档\n          ")],1),o("h4",[t._v("公司系数分档设置")]),o("Button",{staticStyle:{margin:"10px 0"},attrs:{type:"primary",icon:"md-add"},on:{click:t.addCompanyFactor}},[t._v("新增")]),o("Table",{attrs:{columns:t.columns1,data:t.companyFactorList}}),o("h4",{staticStyle:{"margin-top":"20px"}},[t._v("小组系数分档设置")]),o("Button",{staticStyle:{margin:"10px 0"},attrs:{type:"primary",icon:"md-add"},on:{click:t.addGroupFactor}},[t._v("新增")]),o("Table",{attrs:{columns:t.columns1,data:t.groupFactorList}})],1)],1)]),o("Modal",{attrs:{title:t.state,footerHide:!0,width:"400"},model:{value:t.showImg,callback:function(e){t.showImg=e},expression:"showImg"}},[o("Form",{ref:"formItem",attrs:{rules:t.ruleValidate,model:t.formItem,"label-width":120}},[o("FormItem",{attrs:{label:t.performanceLabel,prop:"performance"}},[o("InputNumber",{model:{value:t.formItem.performance,callback:function(e){t.$set(t.formItem,"performance",e)},expression:"formItem.performance"}})],1),o("FormItem",{attrs:{label:"系数",prop:"factor"}},[o("InputNumber",{attrs:{placeholder:""},model:{value:t.formItem.factor,callback:function(e){t.$set(t.formItem,"factor",e)},expression:"formItem.factor"}})],1),o("FormItem",[o("Button",{attrs:{type:"primary"},on:{click:function(e){t.ok("formItem")}}},[t._v("确定")]),o("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"dashed"},on:{click:function(e){t.showImg=!1}}},[t._v("取消")])],1)],1)],1)],1)},a=[],n=(o("7f7f"),o("cadf"),o("551c"),o("097d"),o("66df")),s={data:function(){var t=this;return{closeAccount:"关帐",buttonType:"error",state:"",showImg:!1,type:0,oldId:0,oldPerfor:"",performanceLabel:"",formItem:{performance:"",factor:""},ruleValidate:{performance:[{required:!0,message:"公司业绩不能为空",trigger:"blur",type:"number"}],factor:[{required:!0,message:"系数不能为空",type:"number",trigger:"blur"}]},factorList:[],columns1:[{title:"业绩",key:"performance"},{title:"系数",key:"factor"},{title:"操作",width:150,render:function(e,o){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modify(o)}}},"修改"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(o)}}},"删除")])}}],companyFactorList:[],groupFactorList:[]}},mounted:function(){this.getFactorList()},methods:{ok:function(t){var e=this;this.$refs[t].validate(function(t){var o=e;if(!t)return e.showImg=!0,!1;var r=e.formItem;r.oldId=e.oldId,r.type=e.type,r.oldPerfor=e.oldPerfor;e.state;n["a"].request({url:"manager/addPerformanceFactor",params:r,method:"post"}).then(function(t){t.data.returnCode>0?(o.$Message.info("保存成功"),o.showImg=!1,o.getFactorList()):0==t.data.returnCode&&o.$Message.info("该分档已存在")})})},closeAccountClick:function(){var t=this,e=this;this.$Modal.confirm({title:"提示",content:"<p>是否确认要进行"+this.closeAccount+"</p>",onOk:function(){n["a"].request({url:"manager/saveMemValue",params:{memName:"closeAccount",memValue:"关帐"==t.closeAccount?"true":"false"},method:"post"}).then(function(t){t.data>0&&(e.$Message.info(e.closeAccount+"成功"),e.closeAccount="关帐"==e.closeAccount?"开帐":"关帐",e.buttonType="关帐"==e.closeAccount?"error":"primary")})},onCancel:function(){}})},addCompanyFactor:function(){this.showImg=!0,this.state="新增公司系数分档设置",this.type=0,this.oldId=0,this.formItem.performance="",this.formItem.factor="",this.performanceLabel="公司业绩(万元)"},addGroupFactor:function(){this.showImg=!0,this.state="新增小组系数分档设置",this.type=1,this.oldId=0,this.formItem.performance="",this.formItem.factor="",this.performanceLabel="小组业绩(万元)"},modify:function(t){console.log(t.row.id),this.oldId=t.row.id,this.showImg=!0,this.state="修改公司系数分档设置",this.formItem.performance=t.row.performance,this.formItem.factor=t.row.factor,this.oldPerfor=t.row.performance},remove:function(t){var e=this;n["a"].request({url:"manager/delPerformanceFactor",params:{oldId:t.row.id},method:"get"}).then(function(t){t.data.returnCode>0?(e.$Message.info("删除成功"),e.getFactorList()):e.$Message.info("删除失败")})},getFactorList:function(){var t=this;n["a"].request({url:"manager/getManagerFactorList",params:{},method:"get"}).then(function(e){t.factorList=e.data}),n["a"].request({url:"manager/getPerformanceFactorList",params:{type:0},method:"get"}).then(function(e){t.companyFactorList=e.data}),n["a"].request({url:"manager/getPerformanceFactorList",params:{type:1},method:"get"}).then(function(e){t.groupFactorList=e.data}),n["a"].request({url:"manager/getMemValueByName",params:{memName:"closeAccount"},method:"get"}).then(function(e){"true"==e.data.memValue&&(t.closeAccount="开帐",t.buttonType="primary")})},saveFactor:function(){var t={factorList:encodeURI(JSON.stringify(this.factorList))},e=this;n["a"].request({url:"manager/saveFactorList",params:t,method:"get"}).then(function(t){e.$Message.info("保存成功"),console.log(t)})}}},c=s,i=o("2877"),l=Object(i["a"])(c,r,a,!1,null,null,null);l.options.__file="setting.vue";e["default"]=l.exports}}]);